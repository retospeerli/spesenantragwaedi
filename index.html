<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spesen-Textgenerator (PSW)</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <main class="wrap">

    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Spesen-Textgenerator</h1>
          <p>Offizieller E-Mail-Text mit Pauschalen â€“ editierbar & diktierbar.</p>
        </div>
      </div>

      <div class="meta">
        <span class="pill">EmpfÃ¤nger im Text: Schulverwaltung Â· Stefan BÃ¤ttig</span>
        <span class="pill">Adresse: Eintrachtstrasse 24 Â· 8820 WÃ¤denswil</span>
      </div>
    </header>

    <div class="main">

      <!-- LEFT: Inputs + Text -->
      <div class="section">

        <section class="card">
          <h2>1) Absenderdaten</h2>
          <p class="desc">Vorname/Nachname werden getrennt erfasst. Unter der Grussformel erscheint automatisch nur der Vorname.</p>

          <div class="formgrid">
            <label>
              Vorname
              <input id="firstName" type="text" placeholder="z.B. Reto" autocomplete="given-name" />
            </label>

            <label>
              Nachname
              <input id="lastName" type="text" placeholder="z.B. Speerli" autocomplete="family-name" />
            </label>

            <label>
              Funktion / Stelle
              <input id="role" type="text" placeholder="z.B. Klassenlehrperson" />
            </label>

            <label>
              Anstellungsgrad (%) (nur Berechnung)
              <input id="pensum" type="number" min="1" max="100" step="1" placeholder="z.B. 80" />
            </label>
          </div>

          <div class="hr"></div>

          <h2>2) Pauschalen</h2>
          <p class="desc">WÃ¤hle die Pauschalen aus. Die Zusammenfassung rechts aktualisiert sich automatisch.</p>

          <div class="checks">
            <label class="check">
              <input id="chkMobile" type="checkbox" checked />
              <div>
                <div class="title">Mobiltelefonpauschale (Art. 12)</div>
                <div class="hint">CHF 250.â€“ pro Jahr Ã— Pensum (z.B. 80% â†’ CHF 200.â€“)</div>
              </div>
            </label>

            <label class="check">
              <input id="chkMobility" type="checkbox" checked />
              <div>
                <div class="title">MobilitÃ¤tspauschale</div>
                <div class="hint">CHF 150.â€“ pro Jahr (fix)</div>
              </div>
            </label>
          </div>

          <div class="hr"></div>

          <h2>3) TonalitÃ¤t</h2>
          <p class="desc">WÃ¤hle den Stil der Formulierung. Immer hÃ¶flich, je nach Situation unterschiedlich akzentuiert.</p>

          <div class="toneRow" role="group" aria-label="TonalitÃ¤t">
            <button type="button" class="toneBtn" data-tone="happy" title="WertschÃ¤tzend">ğŸ˜Š</button>
            <button type="button" class="toneBtn active" data-tone="neutral" title="Sachlich">ğŸ˜</button>
            <button type="button" class="toneBtn" data-tone="grumpy" title="MÃ¼hsam, aber hÃ¶flich">ğŸ˜‘</button>
            <span class="toneLabel" id="toneLabel">Sachlich</span>
          </div>

          <div class="actions">
            <button id="btnGenerate" type="button" class="primary">Text generieren</button>
            <button id="btnReset" type="button" class="secondary">ZurÃ¼cksetzen</button>
          </div>

          <p class="small">Hinweis: Im Text steht standardmÃ¤ssig <strong>â€Anstellungsgrad: vgl. Pensenvereinbarungâ€œ</strong>.</p>
        </section>

        <section class="card">
          <h2>4) E-Mail-Text</h2>
          <p class="desc">Der Text ist frei editierbar. Kopiere ihn oder Ã¶ffne den Standard-Mailclient (typisch Outlook) mit EmpfÃ¤nger & Betreff.</p>

          <div class="toolbar">
            <button id="btnCopy" type="button" class="secondary">In Zwischenablage kopieren</button>
            <button id="btnOutlook" type="button" class="primary">Per Outlook versenden</button>

            <span id="copyStatus" class="status" aria-live="polite"></span>
            <span id="outlookStatus" class="status" aria-live="polite"></span>

            <span class="spacer"></span>

            <button id="btnDictate" type="button" class="ghost">ğŸ™ï¸ Diktieren</button>
            <button id="btnStopDictate" type="button" class="ghost" disabled>â¹ï¸ Stop</button>
            <span id="dictStatus" class="status" aria-live="polite"></span>
          </div>

          <textarea id="emailText" spellcheck="true"
            placeholder="Klicke auf â€Text generierenâ€œ. Danach kannst du hier frei editieren oder diktieren."></textarea>

          <p class="small">Tipp: Cursor ins Textfeld setzen â†’ â€Diktierenâ€œ â†’ Text wird am Cursor eingefÃ¼gt (Chrome/Edge empfohlen).</p>
        </section>

      </div>

      <!-- RIGHT: Summary -->
      <aside class="summary" aria-label="Zusammenfassung">
        <section class="card">
          <h3>Zusammenfassung</h3>

          <div class="summaryline">
            <span>Mobiltelefonpauschale</span>
            <strong id="sumMobile">â€”</strong>
          </div>

          <div class="summaryline">
            <span>MobilitÃ¤tspauschale</span>
            <strong id="sumMobility">â€”</strong>
          </div>

          <div class="summaryline summarytotal">
            <span>Total (jÃ¤hrlich)</span>
            <strong id="sumTotal">â€”</strong>
          </div>

          <div class="hr"></div>

          <p class="small" style="margin:0">
            EmpfÃ¤nger (Outlook): <strong>stefan.baettig@pswaedenswil</strong><br />
            Im kopierbaren Text wird keine E-Mail-Adresse ausgegeben.
          </p>
        </section>
      </aside>

    </div>
  </main>

  <script src="./app.js"></script>
</body>
</html>
